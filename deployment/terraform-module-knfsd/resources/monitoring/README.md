# Monitoring

This directory contains a set of scripts and resources that are used for exporting metrics from each Knfsd node. A description of these files is provided below:

| File                             | Description                                                                                                                                                                                                                                                                                                                              |
| -------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [export-root.sh](export-root.sh) | This script is responsible for taking periodic snapsnots from `/proc/slabinfo`. It then writes these outputs to a set of files that are accessible by the `nobody` user. This is required as for security reasons collectd will not execute scripts as root, but root permissions are required to access the output of `/proc/slabinfo`. |
| [knfsd.sh](knfsd.sh)             | [collectd exec](https://collectd.org/wiki/index.php/Plugin:Exec) script that is executed by Collectd and used for gathering metrics                                                                                                                                                                                                      |
| [knfsd.conf](knfsd.conf)         | Collectd Plugin configuration and rewrite chain to make metrics [suitable for Google Cloud Operations](https://cloud.google.com/monitoring/agent/custom-metrics-agent)                                                                                                                                                                   |
