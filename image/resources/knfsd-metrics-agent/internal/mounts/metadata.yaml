name: mounts

attributes:
  instance:
    description: NFS Proxy instance

  server:
    description: NFS mount's server

  path:
    description: NFS mount's path

  operation:
    description: NFS operation name

metrics:
  # TODO: Change metrics to use a cumulative sum (counter) instead of a gauge

  nfs.mount.read_exe:
    enabled: true
    description: nfsiostat Mount Read EXE
    extended_documentation: The average read operation EXE per NFS client mount over the past 60 seconds (Knfsd --> Source Filer)
    unit: ms
    attributes: [server, path, instance]
    gauge:
      value_type: double

  nfs.mount.read_rtt:
    enabled: true
    description: nfsiostat Mount Read RTT
    extended_documentation: The average read operation RTT per NFS client mount over the past 60 seconds (Knfsd --> Source Filer)
    unit: ms
    attributes: [server, path, instance]
    gauge:
      value_type: double

  nfs.mount.write_exe:
    enabled: true
    description: nfsiostat Mount Write EXE
    extended_documentation: The average write operation EXE per NFS client mount over the past 60 seconds (Knfsd --> Source Filer)
    unit: ms
    attributes: [server, path, instance]
    gauge:
      value_type: double

  nfs.mount.write_rtt:
    enabled: true
    description: nfsiostat Mount Write RTT
    extended_documentation: The average write operation RTT per NFS client mount over the past 60 seconds (Knfsd --> Source Filer)
    unit: ms
    attributes: [server, path, instance]
    gauge:
      value_type: double

  nfs.mount.ops_per_second:
    enabled: true
    description: nfsiostat Mount Operations Per Second
    extended_documentation: The number of NFS operations per second per NFS client mount over the past 60 seconds (Knfsd --> Source Filer)
    unit: 1
    attributes: [server, path, instance]
    gauge:
      value_type: double

  nfs.mount.rpc_backlog:
    enabled: true
    description: "nfsiostat Mount RPC Backlog"
    extended_documentation: The RPC Backlog per NFS client mount over the past 60 seconds (Knfsd --> Source Filer)
    unit: 1
    attributes: [server, path, instance]
    gauge:
      value_type: double

  nfs.mount.read_bytes:
    enabled: true
    description: Bytes read from remote NFS server
    unit: By
    attributes: [server, path, instance]
    sum:
      value_type: int
      monotonic: true
      aggregation: cumulative

  nfs.mount.write_bytes:
    enabled: true
    description: Bytes wrote to remote NFS server
    unit: By
    attributes: [server, path, instance]
    sum:
      value_type: int
      monotonic: true
      aggregation: cumulative

  nfs.mount.operation.requests:
    enabled: true
    description: Number of requests
    unit: '{requests}'
    attributes: [server, path, instance, operation]
    sum:
      value_type: int
      monotonic: true
      aggregation: cumulative

  nfs.mount.operation.sent_bytes:
    enabled: true
    description: Total bytes sent for these operations, including RPC headers and payload
    unit: By
    attributes: [server, path, instance, operation]
    sum:
      value_type: int
      monotonic: true
      aggregation: cumulative

  nfs.mount.operation.received_bytes:
    enabled: true
    description: Total bytes received for these operations, including RPC headers and payload
    unit: By
    attributes: [server, path, instance, operation]
    sum:
      value_type: int
      monotonic: true
      aggregation: cumulative

  nfs.mount.operation.major_timeouts:
    enabled: true
    description: Number of times a request has had a major timeout
    unit: '{timeouts}'
    attributes: [server, path, instance, operation]
    sum:
      value_type: int
      monotonic: true
      aggregation: cumulative

  nfs.mount.operation.errors:
    enabled: true
    description: Number of requests that complete with tk_status < 0
    unit: '{errors}'
    attributes: [server, path, instance, operation]
    sum:
      value_type: int
      monotonic: true
      aggregation: cumulative
